# Context Manifest for observability
# Generated by canon-specify on 2026-01-21
# Version: 0.5.0

feature: observability
canon_version: 0.5.0
status: complete
confidence: 0.70

# Summary: What this feature does
summary: |
  Logging hooks and metrics collection for LLM interactions.
  Integrates with cl-llm-provider's observability system to track all
  requests/responses flowing through Agent-Q. Provides chronological
  request logging, statistics aggregation, and configurable output.
  Supports three observability levels (debug, info, warn) and optional
  file logging. Tracks timing, token usage, and per-model statistics.

# Essential context: Always load these for basic understanding
essential:
  - path: "features/observability/feature.yaml"
    reason: "Feature overview, hook architecture, statistics capabilities"
    token_estimate: 950

  - path: "src/observability.lisp"
    reason: "Implementation of hooks and statistics functions"
    sections: ["Setup Functions", "Request Log Management", "Statistics"]
    token_estimate: 1200

# Per-contract context: Load when working on specific contracts
per_contract:
  setup-observability:
    - path: "src/observability.lisp"
      reason: "Implementation of setup-observability and teardown-observability"
      sections: ["Setup Functions"]
      token_estimate: 400

  request-logging:
    - path: "src/observability.lisp"
      reason: "Implementation of *request-log* and custom hooks"
      sections: ["Global State", "Setup Functions"]
      token_estimate: 500

  statistics-aggregation:
    - path: "src/observability.lisp"
      reason: "Implementation of get-request-stats, get-model-stats"
      sections: ["Statistics"]
      token_estimate: 600

  log-management:
    - path: "src/observability.lisp"
      reason: "Implementation of clear-request-log, get-request-log"
      sections: ["Request Log Management"]
      token_estimate: 300

# Reference context: Load for deep work or related areas
reference:
  - path: "specs/plans/2026-01-13-streaming-observability-upgrade.md"
    reason: "Implementation plan for observability integration"
    sections: ["Task 2: Add Observability Infrastructure"]
    token_estimate: 800

# Dependencies: Related features to consider
dependencies:
  - feature: cost-estimation
    reason: "Reads *request-log* for session cost calculation"

# Metadata
generated: 2026-01-21T23:12:00Z
total_token_estimate: 4750
