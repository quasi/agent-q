# Context Manifest for conversation
# Generated by canon-specify on 2026-01-21
# Version: 0.5.0

feature: conversation
canon_version: 0.5.0
status: complete
confidence: 0.90

# Summary: What this feature does
summary: |
  Multi-turn conversation management with message history and role tracking.
  Provides the core conversation abstraction that wraps a sequence of messages
  with associated context manager. Supports 4 message roles (system, user,
  assistant, debug) and maintains chronological message ordering.
  Foundation for session management - sessions persist conversations to disk.

# Essential context: Always load these for basic understanding
essential:
  - path: "core/foundation/vocabulary.md"
    reason: "Domain terms: Conversation, Message, Context Manager"
    sections: ["Conversation", "Message", "Context Manager"]
    token_estimate: 500

  - path: "features/conversation/feature.yaml"
    reason: "Feature overview, architecture, message roles, API surface"
    token_estimate: 600

# Per-contract context: Load when working on specific contracts
per_contract:
  message-creation:
    - path: "src/conversation.lisp"
      reason: "Implementation of make-message function"
      sections: ["Message class", "make-message"]
      token_estimate: 200

  conversation-crud:
    - path: "src/conversation.lisp"
      reason: "Implementation of new-conversation, add-message, clear-conversation"
      sections: ["Conversation class", "Conversation methods"]
      token_estimate: 400

  message-retrieval:
    - path: "src/conversation.lisp"
      reason: "Implementation of get-messages with optional limit"
      sections: ["get-messages method"]
      token_estimate: 150

# Reference context: Load for deep work or related areas
reference:
  - path: "core/decisions/0001-session-conversation-unification.md"
    reason: "ADR explaining conversation persistence architecture"
    token_estimate: 700

# Dependencies: Related features to consider
dependencies:
  - feature: context-management
    reason: "Conversation has-a context-manager"

  - feature: session-management
    reason: "Sessions persist conversations"

# Metadata
generated: 2026-01-21T23:10:00Z
total_token_estimate: 2550
