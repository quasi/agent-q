# Context Manifest for tool-system
# Auto-generated by canon-check on 2026-01-21
# Version: 0.5.0

feature: tool-system
canon_version: 0.5.0
status: complete
confidence: 0.85

# Summary: What this feature does
summary: |
  Extensible tool registry system enabling the LLM to execute actions in the
  running Lisp image. Tools are categorized by domain (introspection, execution,
  buffer manipulation, diff workflow) and protected by safety levels (safe,
  cautious, dangerous) to prevent unintended modifications. 18 tools across 4
  categories with automatic schema generation for LLM provider integration.

# Essential context: Always load these for basic understanding
essential:
  - path: "core/foundation/vocabulary.md"
    reason: "Domain terms: Tool, Agent"
    sections: ["Tool", "Agent"]
    token_estimate: 300

  - path: "features/tool-system/feature.yaml"
    reason: "Feature overview, all 18 tools, safety levels, architecture"
    token_estimate: 1000

  - path: "features/tool-system/contracts/tool-protocol.md"
    reason: "Core contract: define-tool macro, tool class, registration"
    token_estimate: 400

  - path: "features/tool-system/contracts/tool-registry.md"
    reason: "Core contract: registry storage, lookup, schema generation"
    token_estimate: 350

# Per-contract context: Load when working on specific contracts
per_contract:
  tool-protocol:
    - path: "features/tool-system/scenarios/safe-tool-execution.md"
      reason: "Demonstrates tool invocation flow for safe tools"
      token_estimate: 300

  tool-execution:
    - path: "features/tool-system/contracts/tool-execution.md"
      reason: "Execution flow: safety checks, approval, error handling"
      token_estimate: 400
    - path: "features/tool-system/scenarios/dangerous-tool-approval.md"
      reason: "Demonstrates approval handler integration for dangerous tools"
      token_estimate: 300

# Reference context: Load for deep work or related areas
reference:
  - path: "features/tool-system/properties/safety-enforcement.md"
    reason: "Invariant: safety levels checked before execution"
    token_estimate: 250

  - path: "features/tool-system/properties/tool-name-uniqueness.md"
    reason: "Invariant: tool names must be unique in registry"
    token_estimate: 200

  - path: "features/tool-system/properties/error-recovery.md"
    reason: "Invariant: tool errors don't crash agent loop"
    token_estimate: 250

  - path: "features/tool-system/scenarios/tool-error-retry.md"
    reason: "Error handling and recovery patterns"
    token_estimate: 250

# Dependencies: Related features to consider
dependencies:
  - feature: context-management
    reason: "Tools use context for results"

  - feature: conversation
    reason: "Tool results added to conversation"

  - feature: diff-approval
    reason: "Example of dangerous tool with approval workflow"

# Metadata
generated: 2026-01-21T14:29:00Z
total_token_estimate: 4000
