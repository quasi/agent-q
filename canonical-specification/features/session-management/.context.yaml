# Context Manifest for session-management
# Auto-generated by canon-check on 2026-01-21
# Version: 0.5.0

feature: session-management
canon_version: 0.5.0
status: complete
confidence: 0.90

# Summary: What this feature does
summary: |
  Persistent session storage with multi-session support for Agent-Q conversations.
  Sessions wrap conversations with metadata (name, timestamps, model, token usage)
  and provide disk persistence across Emacs/Lisp restarts. Architecture moved from
  Elisp (v1) to Common Lisp (v2) for reliability. Implements Chat Phase 3.

# Essential context: Always load these for basic understanding
essential:
  - path: "core/foundation/vocabulary.md"
    reason: "Domain terms: Session, Conversation, Message"
    sections: ["Session", "Conversation", "Message"]
    token_estimate: 500

  - path: "features/session-management/feature.yaml"
    reason: "Feature overview, v1â†’v2 migration, test coverage (20 tests)"
    token_estimate: 950

  - path: "features/session-management/contracts/session-persistence.md"
    reason: "Core contract: CRUD operations (create/load/save/delete)"
    token_estimate: 350

  - path: "features/session-management/contracts/session-storage.md"
    reason: "Core contract: disk storage format and directory handling"
    token_estimate: 300

# Per-contract context: Load when working on specific contracts
per_contract:
  session-persistence:
    - path: "features/session-management/scenarios/create-and-save-session.md"
      reason: "Primary scenario: session lifecycle"
      token_estimate: 300
    - path: "features/session-management/scenarios/switch-between-sessions.md"
      reason: "Demonstrates multi-session management"
      token_estimate: 250

  session-serialization:
    - path: "features/session-management/contracts/session-serialization.md"
      reason: "v2 format specification (S-expressions)"
      token_estimate: 350

# Reference context: Load for deep work or related areas
reference:
  - path: "features/session-management/properties/session-id-uniqueness.md"
    reason: "Invariant: session-YYYYMMDD-HHMMSS-XXXX format ensures uniqueness"
    token_estimate: 200

  - path: "features/session-management/properties/auto-save-reliability.md"
    reason: "Invariant: timer + buffer-kill hooks prevent data loss"
    token_estimate: 250

  - path: "features/session-management/properties/backwards-compatibility.md"
    reason: "Invariant: v1 format automatically converted on load"
    token_estimate: 300

  - path: "core/decisions/0001-session-conversation-unification.md"
    reason: "ADR explaining CL persistence architecture"
    token_estimate: 700

  - path: "core/decisions/0005-phased-chat-development.md"
    reason: "ADR explaining sessions as Chat Phase 3"
    token_estimate: 600

# Dependencies: Related features to consider
dependencies:
  - feature: conversation
    reason: "Session wraps conversation"

  - feature: context-management
    reason: "Context attached to session conversation"

  - feature: chat-interface
    reason: "UI displays session info in header and mode line"

# Metadata
generated: 2026-01-21T14:28:00Z
total_token_estimate: 5050
